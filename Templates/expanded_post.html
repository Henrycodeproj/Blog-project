{% extends 'base.html' %}

{% block style %}
<link rel="stylesheet" href="{{ url_for('static', filename = './css/expanded_post.css') }}">
{% endblock %}

{% block body %}
<!-- <div class="row d-flex justify-content-center">
  <div class = "col-md-8 col-lg-6 fun">
  </div>
</div> -->

</div>

<div class = "container article">
  <div class = "top-iconbar">
    {% if expanded_post.poster.profimage == None or '' or [] %}
    <a href="{{url_for('public_user_dashboard', poster = expanded_post.poster.username) }}" class = "profile_link">
      <img class = "thumbnail" src="{{ url_for('static', filename='/images/default.jpg')}}" alt="">
      -{{expanded_post.posting_user}}
    </a>
    {% else %}
    <a href="{{url_for('public_user_dashboard', poster = expanded_post.poster.username) }}" class = "profile_link">
      <img class = "thumbnail" src="{{ url_for('static', filename='/images/' + expanded_post.poster.profimage)}}" alt="">
      -{{expanded_post.posting_user}}
    </a>
    {% endif %}
    <div class = "posting_date">{{expanded_post.date_posted}} <div class = "views">Views: {{expanded_post.article_views}}</div></div>
  </div>
  <img class = "posted_images img-fluid" src="{{url_for('static', filename='/images/' + expanded_post.image) }}" alt="Image" />
  <div class = "expanded_title">{{ expanded_post.title}}</div>
  <div class = "bar"></div>
  <div>{{ expanded_post.content }}</div>
  <div class = "comments_title">Comments</div>
  {% if check == True %}
    <form action="" method="POST">
      <div class = "post_wrapper">
        {% if current_user_check == False %}
      <img class = "thumbnail" src="{{url_for('static', filename='/images/' + current_user.profimage) }}" alt="">
      {{form.comment(cols = "2", rows = "3", placeholder = "Post a comment", class ="comment_box")}}
      </div>
      <div class = "d-flex submit"><input type="submit" value="submit" class = "btn btn-dark comment_submit_button"></div>
    </form>
        {% else %}
        {% endif %}
  {% else %}
  {% endif %}

  {% for users in show_comments %}
  <div class = "wrapper d-flex">
    <img class = "comment_thumbnail" src="{{url_for('static', filename='/images/' + users.poster_image)}}" alt="">
    <div class = "info_wrap">
        <div class = "commenter_username">{{users.posting_user}}
          <span class = "comment_date">{{users.date}}</span>
        </div>
      <div>{{users.comment}}</div>
    </div>
  </div>
  {% endfor %}

{% endblock %}
